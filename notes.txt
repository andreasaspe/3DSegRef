export nnUNet_raw="/scratch/awias/data/Pancreas/nnUNet_dataset/nnUNet_raw"
export nnUNet_results="/scratch/awias/data/Pancreas/nnUNet_dataset/nnUNet_results"
export nnUNet_preprocessed="/scratch/awias/data/Pancreas/nnUNet_dataset/nnUNet_preprocessed"

conda activate nnunet_v2
export nnUNet_raw="/scratch/awias/data/nnUNet/nnUNet_raw"
export nnUNet_results="/scratch/awias/data/nnUNet/nnUNet_results"
export nnUNet_preprocessed="/scratch/awias/data/nnUNet/nnUNet_preprocessed"
nnUNetv2_train 13 3d_fullres 0 -tr nnUNetTrainerNoMirroring -p nnUNetResEncUNetLPlans

Dataset004_TotalSegmentatorPancreas
Dataset006_TotalSegmentatorGallbladder


srun --gres=gpu -c 8 --pty --mem 40g bash
srun -c 16 --mem=32G --pty bash

export nnUNet_raw="/home/awias/data/nnUNet/nnUNet_raw"
export nnUNet_results="/home/awias/data/nnUNet/nnUNet_results"
export nnUNet_preprocessed="/home/awias/data/nnUNet/nnUNet_preprocessed"


CUDA_VISIBLE_DEVICES=3


important paths:
kalder nnUNetDatasetBlosc2 (/home/awias/code/nnUNet/nnunetv2/training/dataloading/nnunet_dataset.py)

 søg efter self.optimizer.step() i filen nnUNetTrainer.py

Her ændrer du epochs osv:
/home/awias/code/nnUNet_v2/nnunetv2/training/nnUNetTrainer/nnUNetTrainer.py

Her gemmer jeg logits:
/home/awias/code/nnUNet_v2/nnunetv2/inference/export_prediction.py

Ændring af info_dict
nnUNet_v2/nnunetv2/utilities/get_network_from_plans.py


Terminal overblik

Pancreas1 træner GALLBLADDER (1) --c
Pancreas2 træner GALLBLADDER (2)
Pancreas4 træner GALLBLADDER (3)


Pancreas (1) er ish færdigtrænet
Pancreas (2) er ish færdigtrænet
Pancreas (3) er ish færdigtrænet
Pancreas (4) er ish færdigtrænet


dette står i export_prediction.py under inference
    if globals().get('do_not_use_softmax', False):
        label_manager.inference_nonlin = lambda x: x




WARNING: In /tmp/SimpleITK-build/ITK/Modules/IO/NIFTI/src/itkNiftiImageIO.cxx, line 2008
NiftiImageIO (0x927ad00): /scratch/awias/data/Pancreas/nnUNet_dataset/nnUNet_raw/Dataset001_Pancreas/labelsTr/32.nii.gz has unexpected scales in sform

WARNING: In /tmp/SimpleITK-build/ITK/Modules/IO/NIFTI/src/itkNiftiImageIO.cxx, line 2008
NiftiImageIO (0x927ad00): /scratch/awias/data/Pancreas/nnUNet_dataset/nnUNet_raw/Dataset001_Pancreas/labelsTr/32.nii.gz has unexpected scales in sform


_internal_maybe_mirror_and_predict (i predict from raw data)




from dynamic_network_architectures.architectures.unet import ResidualEncoderUNet
    
    
class MyNetwork(ResidualEncoderUNet):

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
    
    
    
    def forward(self, x):
        outputs = super().forward(x)
        # custom processing of outputs if needed
        return outputs
        

network = MyNetwork()
network.load_state_dict(model.state_dict())



nnUNetv2_predict -i /scratch/awias/data/Pancreas/nnUNet_dataset/nnUNet_raw/Dataset001_Pancreas/imagesTs -o predictions/ -d 1 -c 3d_fullres -f 0




/scratch/awias/data/Pancreas/nnUNet_dataset/nnUNet_results/Dataset001_Pancreas/nnUNetTrainerNoMirroring__nnUNetResEncUNetLPlans__3d_fullres

/scratch/awias/data/Pancreas/nnUNet_dataset/nnUNet_results/Dataset001
_Pancreas/nnUNetTrainer__nnUNetPlans__3d_fullres/dataset.json